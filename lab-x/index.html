
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="IBM Developer">
      
      
        <link rel="canonical" href="https://ibm.github.io/docker101/lab-x/">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>Lab 3 - Introduction to Orchestration - Docker 101 Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"IBM Plex Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-3-introduction-to-orchestration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ibm.github.io/docker101" title="Docker 101 Workshop" class="md-header-nav__button md-logo" aria-label="Docker 101 Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Docker 101 Workshop
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Lab 3 - Introduction to Orchestration
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm/docker101/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    docker101
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../lab-0/" class="md-tabs__link">
        Workshop
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ibm.github.io/docker101" title="Docker 101 Workshop" class="md-nav__button md-logo" aria-label="Docker 101 Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Docker 101 Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm/docker101/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    docker101
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
    
    <label class="md-nav__link" for="nav-1">
      Welcome
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Welcome" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Welcome
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      About the workshop
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    
    <label class="md-nav__link" for="nav-2">
      Workshop
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Workshop" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Workshop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-0/" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-1/" class="md-nav__link">
      Lab 1. Running Your First Container
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-2/" class="md-nav__link">
      Lab 2. Adding Value with Custom Docker Images
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../lab-3/" class="md-nav__link">
      Lab 3. Managing Data in Containers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-create-your-first-swarm" class="md-nav__link">
    Step 1: Create your first swarm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-deploy-your-first-service" class="md-nav__link">
    Step 2: Deploy your first service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-scale-your-service" class="md-nav__link">
    Step 3: Scale your service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-rolling-updates" class="md-nav__link">
    Step 4: Rolling Updates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-reconciliation" class="md-nav__link">
    Step 5: Reconciliation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#number-of-nodes" class="md-nav__link">
    Number of nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm/docker101/edit/master/docs/lab-x/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="lab-3-introduction-to-orchestration">Lab 3 - Introduction to Orchestration<a class="headerlink" href="#lab-3-introduction-to-orchestration" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>So far you have learned how to run applications using docker on your local machine, but what about running dockerized applications in production? There are a number of problems that come with building an application for production: scheduling services across distributed nodes, maintaining high availability, implementing reconciliation, scaling, and logging... just to name a few.</p>
<p>There are several orchestration solutions out there that help you solve some of these problems. The most widely adopted orchestration platform is Kubernetes. The <a href="https://cloud.ibm.com/kubernetes/catalog/create">IBM Kubernetes Service</a> is a managed service of <a href="https://kubernetes.io/">Kubernetes</a> to run containers in production.</p>
<p>Red Hat Openshift is an extension of Kubernetes with Enterprise grade services to provide a more secure and integrated extension of Kubernetes. <a href="https://cloud.ibm.com/kubernetes/catalog/create?platformType=openshift">Red Hat OpenShift Kubernetes Service (ROKS)</a> on IBM Cloud is a managed service of OpenShift. You can also create a free 1-month, 1 node OpenShift cluster on <a href="http://manage.openshift.com/">OpenShift Online</a>.</p>
<p>This lab is for those who are interested in learning how to orchestrate applications using Docker Swarm. Docker Swarm is the orchestration tool that comes built-in to the Docker Engine.</p>
<p>We will be using a few Docker commands in this lab. For full documentation on available commands check out the <a href="https://docs.docker.com/">Docker official documentation</a>.</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>In order to complete a lab about orchestrating an application that is deployed across multiple hosts, you need... well, multiple hosts.
Therefor, for this lab you will be using the multi-node support provided by <a href="http://play-with-docker.com">Play with Docker</a>. This is the easiest way to test out Docker Swarm, without having to deal with installing docker on multiple hosts yourself.</p>
<p><img alt="Multiple Instances" src="../assets/images/pwd-multi-instances.png" /></p>
<h2 id="step-1-create-your-first-swarm">Step 1: Create your first swarm<a class="headerlink" href="#step-1-create-your-first-swarm" title="Permanent link">&para;</a></h2>
<p>In this step, we will create our first swarm using play-with-docker.</p>
<ol>
<li>
<p>Navigate to <a href="http://play-with-docker.com">Play with Docker</a></p>
</li>
<li>
<p>Click "add new instance" on the lefthand side three times to create three nodes</p>
<p>Our first swarm cluster will have three nodes.</p>
</li>
<li>
<p>Initialize the swarm on node 1</p>
<div class="highlight"><pre><span></span><code>$ docker swarm init --advertise-addr eth0
Swarm initialized: current node <span class="o">(</span>vq7xx5j4dpe04rgwwm5ur63ce<span class="o">)</span> is now a manager.

To add a worker to this swarm, run the following command:

    docker swarm join <span class="se">\</span>
    --token SWMTKN-1-50qba7hmo5exuapkmrj6jki8knfvinceo68xjmh322y7c8f0pj-87mjqjho30uue43oqbhhthjui <span class="se">\</span>
    <span class="m">10</span>.0.120.3:2377

To add a manager to this swarm, run <span class="s1">&#39;docker swarm join-token manager&#39;</span> and follow the instructions.
</code></pre></div>
<p>You can think of docker swarm as a special "mode" that is activated by the command: <code>docker swarm init</code>. The <code>--advertise-addr</code> specifies the address in which the other nodes will use to join the swarm.</p>
<p>This <code>docker swarm init</code> command generates a join token. The token makes sure that no malicious nodes join our swarm. We will need to use this token to join the other nodes to the swarm. For convenience, the output includes the full command <code>docker swarm join</code> which you can just copy/paste to the other nodes.</p>
</li>
<li>
<p>On both node2 and node3, copy and run the <code>docker swarm join</code> command that was outputted to YOUR console by the last command.</p>
<p>You now have a three node swarm!</p>
</li>
<li>
<p>Back on node1, run <code>docker node ls</code> to verify your 3 node cluster.</p>
<div class="highlight"><pre><span></span><code>$ docker node ls
ID    HOSTNAME    STATUS    AVAILABILITY    MANAGER STATUS
7x9s8baa79l29zdsx95i1tfjp    node3    Ready    Active
x223z25t7y7o4np3uq45d49br    node2    Ready    Active
zdqbsoxa6x1bubg3jyjdmrnrn *   node1   Ready    Active    Leader
</code></pre></div>
<p>This command outputs the three nodes in our swarm. The * next to the ID of the node represents the node that handled that specific command (<code>docker node ls</code> in this case).</p>
<p>Our node consists of  1 manager node and 2 workers nodes. Managers handle commands and manage the state of the swarm. Workers cannot handle commands and are simply used to run containers at scale. By default, managers are also used to run containers.</p>
<p>All <code>docker service</code> commands for the rest of this lab need to be executed on the manager node (Node1).</p>
<p><strong>Note:</strong> While we will control the Swarm directly from the node in which its running, you can control a docker swarm remotely by connecting to the docker engine of the manager via the remote API or activating a remote host from your local docker installation (using the <code>$DOCKER_HOST</code> and <code>$DOCKER_CERT_PATH</code> environment variables). This will become useful when you want to control production applications remotely instead of ssh-ing directly into production servers.</p>
</li>
</ol>
<h2 id="step-2-deploy-your-first-service">Step 2: Deploy your first service<a class="headerlink" href="#step-2-deploy-your-first-service" title="Permanent link">&para;</a></h2>
<p>Now that we have our 3 node Swarm cluster initialized, let's deploy some containers. To run containers on a Docker Swarm, we want to create a service. A service is an abstraction that represents multiple containers of the same image deployed across a distributed cluster.</p>
<p>Let's do a simple example using Nginx. For now we will create a service with just 1 running container, but we will scale up later.</p>
<ol>
<li>
<p>Deploy a service using Nginx</p>
<div class="highlight"><pre><span></span><code>$ docker service create --detach<span class="o">=</span><span class="nb">true</span> --name nginx1 --publish <span class="m">80</span>:80  --mount <span class="nv">source</span><span class="o">=</span>/etc/hostname,target<span class="o">=</span>/usr/share/nginx/html/index.html,type<span class="o">=</span>bind,ro nginx:1.18
pgqdxr41dpy8qwkn6qm7vke0q
</code></pre></div>
<p>This above statement is <em>declarative</em>, and docker swarm will actively try to maintain the state declared in this command unless explicitly changed via another <code>docker service</code> command. This behavior comes in handy when nodes go down, for example, and containers are automatically rescheduled on other nodes. We will see a demonstration of that a little later on in this lab.</p>
<p>The <code>--mount</code> flag is a neat trick to have nginx print out the hostname of the node it's running on. This will come in handy later in this lab when we start load balancing between multiple containers of nginx that are distributed across different nodes in the cluster, and we want to see which node in the swarm is serving the request.</p>
<p>We are using nginx tag "1.18" in this command. We will demonstrate a rolling update with version 1.19 later in this lab.</p>
<p>The <code>--publish</code> command makes use of the swarm's built in <em>routing mesh</em>. In this case port 80 is exposed on <em>every node in the swarm</em>. The routing mesh will route a request coming in on port 80 to one of the nodes running the container.</p>
</li>
<li>
<p>Inspect the service</p>
<p>You can use <code>docker service ls</code> to inspect the service you just created.</p>
<div class="highlight"><pre><span></span><code>$ docker service ls
ID                  NAME                MODE                REPLICAS            IMAGE               PORTS
pgqdxr41dpy8        nginx1              replicated          <span class="m">1</span>/1                 nginx:1.18          *:80-&gt;80/tcp
</code></pre></div>
</li>
<li>
<p>Check out the running container of the service</p>
<p>To take a deeper look at the running tasks, you can use <code>docker service ps</code>. A task is yet another abstraction using in docker swarm that represents the running instances of a service. In this case, there is a 1-1 mapping between a task and a container.</p>
<div class="highlight"><pre><span></span><code>$ docker service ps nginx1
ID    NAME    IMAGE    NODE    DESIRED STATE    CURRENT STAT
E     ERROR    PORTS
iu3ksewv7qf9    nginx1.1    nginx:1.18    node1    Running    Running <span class="m">8</span> minutes ago
</code></pre></div>
<p>If you happen to know which node your container is running on (you can see which node based on the output from <code>docker service ps</code>), you can use <code>docker container ls</code> to see the container running on that specific node.</p>
</li>
<li>
<p>Test the service</p>
<p>Because of the routing mesh, we can send a request to any node of the swarm on port 80. This request will be automatically routed to the one node that is running our nginx container.</p>
<p>Try this on each node:</p>
<div class="highlight"><pre><span></span><code>$ curl localhost:80
node1
</code></pre></div>
<p>Curling will output the hostname where the container is running. For this example, it is running on "node1", but yours might be different.</p>
</li>
</ol>
<h2 id="step-3-scale-your-service">Step 3: Scale your service<a class="headerlink" href="#step-3-scale-your-service" title="Permanent link">&para;</a></h2>
<p>In production we may need to handle large amounts of traffic to our application. So let's scale!</p>
<ol>
<li>
<p>Update your service with an updated number of replicas</p>
<p>We are going to use the <code>docker service</code> command to update the nginx service we created earlier to include 5 replicas. This is defining a new state for our service.</p>
<div class="highlight"><pre><span></span><code>$ docker service update --replicas<span class="o">=</span><span class="m">5</span> --detach<span class="o">=</span><span class="nb">true</span> nginx1
nginx1
</code></pre></div>
<p>As soon as this command is run the following happens:</p>
<ol>
<li>The state of the service is updated to 5 replicas (which is stored in the swarms internal storage).</li>
<li>Docker swarm recognizes that the number of replicas that is scheduled now does not match the declared state of 5.</li>
<li>Docker swarm schedules 5 more tasks (containers) in an attempt to meet the declared state for the service.</li>
</ol>
<p>This swarm is actively checking to see if the desired state is equal to actual state, and will attempt to reconcile if needed.</p>
</li>
<li>
<p>Check the running instances</p>
<p>After a few seconds, you should see that the swarm did its job, and successfully started 9 more containers. Notice that the containers are scheduled across all three nodes of the cluster. The default placement strategy that is used to decide where new containers are to be run is "emptiest node", but that can be changed based on your need.</p>
<div class="highlight"><pre><span></span><code>$ docker service ps nginx1
ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STAT
E            ERROR               PORTS
iu3ksewv7qf9        nginx1.1            nginx:1.18          node1               Running             Running <span class="m">17</span> m
inutes ago
lfz1bhl6v77r        nginx1.2            nginx:1.18          node2               Running             Running <span class="m">6</span> mi
nutes ago
qururb043dwh        nginx1.3            nginx:1.18          node3               Running             Running <span class="m">6</span> mi
nutes ago
q53jgeeq7y1x        nginx1.4            nginx:1.18          node3               Running             Running <span class="m">6</span> mi
nutes ago
xj271k2829uz        nginx1.5            nginx:1.18          node1               Running             Running <span class="m">7</span> mi
nutes ago
</code></pre></div>
</li>
<li>
<p>Send a bunch of requests to <a href="http://localhost:80">localhost:80</a></p>
<p>The <code>--publish 80:80</code> is still in effect for this service, that was not changed when we ran <code>docker service update</code>. However, now when we send requests on port 80, the routing mesh has multiple containers in which to route requests to. The routing mesh acts as a load balancer for these containers, alternating where it routes requests to.</p>
<p>Let's try it out by curling multiple times. Note, that it doesn't matter which node you send the requests. There is no connection between the node that receives the request, and the node that that request is routed to.</p>
<div class="highlight"><pre><span></span><code>$ curl localhost:80
node3
$ curl localhost:80
node3
$ curl localhost:80
node2
$ curl localhost:80
node1
$ curl localhost:80
node1
</code></pre></div>
</li>
</ol>
<p>You should see which node is serving each request because of the nifty <code>--mount</code> command we used earlier.</p>
<p><strong>Limits of the routing Mesh</strong>
The routing mesh can only publish one service on port 80. If you want multiple services exposed on port 80, then you can use an external application load balancer outside of the swarm to accomplish this.</p>
<ol>
<li>
<p>Check the aggregated logs for the service</p>
<p>Another easy way to see which nodes those requests were routed to is to check the aggregated logs. We can get aggregated logs for the service using <code>docker service logs [service name]</code>. This aggregates the output from every running container, i.e. the output from <code>docker container logs [container name]</code>.</p>
<div class="highlight"><pre><span></span><code>$ docker service logs nginx1
nginx1.4.q53jgeeq7y1x@node3    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:59:39 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
nginx1.2.lfz1bhl6v77r@node2    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:59:40 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
nginx1.5.xj271k2829uz@node1    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:59:41 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
nginx1.1.iu3ksewv7qf9@node1    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:50:23 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
nginx1.1.iu3ksewv7qf9@node1    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:59:41 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
nginx1.3.qururb043dwh@node3    <span class="p">|</span> <span class="m">10</span>.255.0.2 - - <span class="o">[</span><span class="m">28</span>/Jun/2017:18:59:38 +0000<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> <span class="m">6</span> <span class="s2">&quot;-&quot;</span> <span class="s2">&quot;curl/7.</span>
<span class="s2">52.1&quot;</span> <span class="s2">&quot;-&quot;</span>
</code></pre></div>
<p>Based on these logs we can see that each request was served by a different container.</p>
<p>In addition to seeing whether the request was sent to node1, node2, or node3, you can also see which container on each node that it was sent to. For example <code>nginx1.5</code> means that request was sent to container with that same name as indicated in the output of <code>docker service ps nginx1</code>.</p>
</li>
</ol>
<h2 id="step-4-rolling-updates">Step 4: Rolling Updates<a class="headerlink" href="#step-4-rolling-updates" title="Permanent link">&para;</a></h2>
<p>Now that we have our service deployed, let's demonstrate a release of our application. We are going to update the version of Nginx to version "1.19". To do this update we are going to use the <code>docker service update</code> command.</p>
<div class="highlight"><pre><span></span><code>$ docker service update --image nginx:1.19 --detach<span class="o">=</span><span class="nb">true</span> nginx1
1a2b3c
</code></pre></div>
<p>This will trigger a rolling update of the swarm. Quickly type in <code>docker service ps nginx1</code> over and over to see the updates in real time.</p>
<p>You can fine tune the rolling update using these options:</p>
<ul>
<li><code>--update-parallelism</code> will dictate the number of containers to update at once. (defaults to 1)</li>
<li><code>--update-delay</code> will dictate the delay between finishing updating a set of containers before moving on to the next set.</li>
</ul>
<p>After a few seconds, run <code>docker service ps nginx1</code> to see all the images have been updated to nginx:1.19.</p>
<div class="highlight"><pre><span></span><code>$ docker service ps nginx1
ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STATE             ERROR               PORTS
l4s05d18j9ga        nginx1.1            nginx:1.19          node1               Ready               Ready <span class="m">1</span> second ago
zsm6as2ffq8g         <span class="se">\_</span> nginx1.1        nginx:1.18          node1               Shutdown            Running <span class="m">1</span> second ago
nk9awj3zercp        nginx1.2            nginx:1.19          node2               Running             Running <span class="m">15</span> seconds ago
21gxmjea135j         <span class="se">\_</span> nginx1.2        nginx:1.18          node3               Shutdown            Shutdown <span class="m">16</span> seconds ago
2cdadovtek2m        nginx1.3            nginx:1.19          node1               Running             Running <span class="m">6</span> seconds ago
ld0zgx5et2xy         <span class="se">\_</span> nginx1.3        nginx:1.18          node1               Shutdown            Shutdown <span class="m">6</span> seconds ago
p3gu8wcpmeax        nginx1.4            nginx:1.19          node3               Running             Running <span class="m">1</span> second ago
wo4ioe8lrju6         <span class="se">\_</span> nginx1.4        nginx:1.18          node2               Shutdown            Shutdown <span class="m">2</span> seconds ago
lpe6dkkr4osc        nginx1.5            nginx:1.19          node3               Running             Running <span class="m">10</span> seconds ago
6qvqfb6x77u4         <span class="se">\_</span> nginx1.5        nginx:1.18          node3               Shutdown            Shutdown <span class="m">11</span> seconds ago
</code></pre></div>
<p>Repeat the above command, until all images have successfully updated  to the latest version of nginx!</p>
<h2 id="step-5-reconciliation">Step 5: Reconciliation<a class="headerlink" href="#step-5-reconciliation" title="Permanent link">&para;</a></h2>
<p>In the previous step, we updated the state of our service using <code>docker service update</code>. We saw Docker Swarm in action as it recognized the mismatch between desired state and actual state, and attempted to solve this issue.</p>
<p>The "inspect-&gt;adapt" model of docker swarm enables it to perform reconciliation when something goes wrong. For example, when a node in the swarm goes down it might take down running containers with it. The swarm will recognize this loss of containers, and will attempt to reschedule containers on available nodes in order to achieve the desired state for that service.</p>
<p>We are going to remove a node, and see tasks of our nginx1 service be rescheduled on other nodes automatically.</p>
<ol>
<li>
<p>For the sake of clean output, first create a brand new service by copying the line below. We will change the name, and the publish port to avoid conflicts with our existing service. We will also add the <code>--replicas</code> command to scale the service with 5 instances.</p>
<div class="highlight"><pre><span></span><code>$ docker service create --detach<span class="o">=</span><span class="nb">true</span> --name nginx2 --replicas<span class="o">=</span><span class="m">5</span> --publish <span class="m">81</span>:80  --mount <span class="nv">source</span><span class="o">=</span>/etc/hostname,target<span class="o">=</span>/usr/share/nginx/html/index.html,type<span class="o">=</span>bind,ro nginx:1.18
aiqdh5n9fyacgvb2g82s412js
</code></pre></div>
</li>
<li>
<p>On Node1, use <code>watch</code> to watch the update from the output of <code>docker service ps</code>. Note "watch" is a linux utility and might not be available on other platforms.</p>
<div class="highlight"><pre><span></span><code>$ watch -n <span class="m">1</span> docker service ps nginx2
ok
</code></pre></div>
<p>This should result in a window that looks like this:</p>
<div class="highlight"><pre><span></span><code>Every <span class="m">1</span>.0s: docker service ps nginx2          <span class="m">2020</span>-09-23 <span class="m">20</span>:59:43

ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT
STATE            ERROR               PORTS
nveflkbbzhia        nginx2.1            nginx:1.18          node1               Running             Running
<span class="m">41</span> seconds ago
qlk6avfcjqft        nginx2.2            nginx:1.18          node2               Running             Running
<span class="m">41</span> seconds ago
psizpiwxt1ta        nginx2.3            nginx:1.18          node3               Running             Running
<span class="m">41</span> seconds ago
0kmrqeneqztk        nginx2.4            nginx:1.18          node2               Running             Running
<span class="m">41</span> seconds ago
zdg9j4aiqt8w        nginx2.5            nginx:1.18          node3               Running             Running
<span class="m">41</span> seconds ago
</code></pre></div>
</li>
<li>
<p>Click on Node3, and type the command to leave the swarm cluster.</p>
<div class="highlight"><pre><span></span><code>$ docker swarm leave
ok
</code></pre></div>
<p>This is the "nice" way to leave the swarm, but you can also kill the node and the following behavior will be the same.</p>
</li>
<li>
<p>Click on Node1 to watch the reconciliation in action. You should see that the swarm will attempt to get back to the declared state by rescheduling the containers that were running on node3 to node1 and node2 automatically.</p>
<div class="highlight"><pre><span></span><code>$ docker service ps nginx2
ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS
jeq4604k1v9k        nginx2.1            nginx:1.18          node1               Running             Running <span class="m">5</span> seconds ago
6koehbhsfbi7         <span class="se">\_</span> nginx2.1        nginx:1.18          node3               Shutdown            Running <span class="m">21</span> seconds ago
dou2brjfr6lt        nginx2.2            nginx:1.18          node1               Running             Running <span class="m">26</span> seconds ago
8jc41tgwowph        nginx2.3            nginx:1.18          node2               Running             Running <span class="m">27</span> seconds ago
n5n8zryzg6g6        nginx2.4            nginx:1.18          node1               Running             Running <span class="m">26</span> seconds ago
cnofhk1v5bd8        nginx2.5            nginx:1.18          node2               Running             Running <span class="m">27</span> seconds ago
<span class="o">[</span>node1<span class="o">]</span> <span class="o">(</span>loc
</code></pre></div>
</li>
</ol>
<h2 id="number-of-nodes">Number of nodes<a class="headerlink" href="#number-of-nodes" title="Permanent link">&para;</a></h2>
<p>In this lab, our Docker Swarm cluster consists of one master, and two worker nodes. This configuration is not highly available. The manager node contains the necessary information to manage the cluster, so if this node goes down, the cluster will cease to function. For a production application, you will want to provision a cluster with multiple manager nodes to allow for manager node failures.</p>
<p>For manager nodes you want at least 3, but typically no more than 7. Managers implement the raft consensus algorithm, which requires that more than 50% of the nodes agree on the state that is being stored for the cluster. If you don't achieve &gt;50%, the swarm will cease to operate correctly. For this reason, the following can be assumed about node failure tolerance.</p>
<ul>
<li>3 manager nodes tolerates 1 node failure</li>
<li>5 manager nodes tolerates 2 node failures</li>
<li>7 manager nodes tolerates 3 node failures</li>
</ul>
<p>It is possible to have an even number of manager nodes, but it adds no value in terms of the number of node failures. For example, 4 manager nodes would only tolerate 1 node failure, which is the same tolerance as a 3 manager node cluster. The more manager nodes you have, the harder it is to achieve a consensus on the state of a cluster.</p>
<p>While you typically want to limit the number of manager nodes to no more than 7, you can scale the number of worker nodes much higher than that. Worker nodes can scale up into the 1000's of nodes. Worker nodes communicate using the gossip protocol, which is optimized to be highly performant under large traffic and a large number of nodes.</p>
<p>If you are using <a href="http://play-with-docker.com">Play with Docker</a>, you can easily deploy multiple manager node clusters using the built in templates. Click the templates icon in the upper left to see what templates are available.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>In this lab, you got an introduction to problems that come with running container with production such as scheduling services across distributed nodes, maintaining high availability, implementing reconciliation, scaling, and logging. We used the orchestration tool that comes built-in to the Docker Engine- Docker Swarm, to address some of these issues.</p>
<p>Key Takeaways:</p>
<ul>
<li>The Docker Swarm schedules services using a declarative language. You declare the state, and the swarm attempts to maintain and reconcile to make sure the actual state == desired state</li>
<li>Docker Swarm is composed of manager and worker nodes. Only managers can maintain the state of the swarm and accept commands to modify it. Workers have high scability and are only  used to run containers. By default managers can run containers as well.</li>
<li>The routing mesh built into swarm means that any port that is published at the service level will be exposed on every node in the swarm. Requests to a published service port will be routed automatically to a container of the service that is running in the swarm.</li>
<li>Many tools out there exist to help solve problems with orchestration containerized applications in production, include Docker Swarm, and the <a href="https://cloud.ibm.com/kubernetes/catalog/create">IBM Kubernetes Service</a>.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IBM Developer
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="../assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>